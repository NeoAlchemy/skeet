<html>
    <head>  
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
        <script>
            // Component for detecting if shotgun raycaster hits the clayPigeon
            AFRAME.registerComponent('shotgun-raycaster', {
              init: function () {
                const clayPigeon = document.getElementById('clayPigeon');
                const raycasterEl = this.el;

                // Event listener to detect intersection with the clayPigeon
                raycasterEl.addEventListener('raycaster-intersection', function(event) {
                  const intersects = event.detail.intersections;

                  // Check if the clayPigeon is one of the intersected objects
                  if (intersects.length > 0 && intersects[0].object.el === clayPigeon) {
                    console.log('Shotgun hit the clay pigeon!');
                  }
                });
              }
            });

        </script>
        <style>
            /* CSS to position the button */
            #myButton {
                position: absolute;
                top: 20px; /* Adjust this value to position vertically */
                left: 20px; /* Adjust this value to position horizontally */
                z-index: 10; /* Ensure it appears above the A-Frame canvas */
                padding: 10px 20px;
                background-color: white;
                border: 1px solid black;
                border-radius: 5px;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <a-scene>
            <a-assets>
                <a-asset-item id="shotgun" src="/assets/shotgun/shotgun.gltf"></a-asset-item>
                <a-asset-item id="clay-pigeon" src="/assets/clay-pigeon/scene.gltf"></a-asset-item>
            </a-assets>

            <!-- Clay pigeon target -->
            <a-entity id="clayPigeon" class="collidable" gltf-model="#clay-pigeon" position="0 1 -20" visible="true"></a-entity>

            <!-- Camera with look-controls -->
            <a-entity camera look-controls position="0 1.6 0">
                
                <!-- Shotgun with raycaster to detect clayPigeon -->
                <a-entity 
                  gltf-model="#shotgun" 
                  shotgun-raycaster
                  raycaster="objects: .collidable; far: 100; showLine: true; interval: 500"></a-entity>
                  <!--rotation="-30 220 20" 
                  position="0.5 -0.6 -1">
                </a-entity> -->
            </a-entity>
            
            <!-- Environment -->
            <a-entity environment="preset: forest; dressingAmount: 500"></a-entity>
        </a-scene>
        <button id="myButton">Click</button>
        <script>
            // JavaScript to handle button click
            document.getElementById('myButton').addEventListener('click', function() {
                const clayPigeon = document.getElementById('clayPigeon');
                clayPigeon.setAttribute('visible', 'false'); // Hides the clay pigeon
                console.log('Button clicked! Clay pigeon hidden.');
            });
        </script>
    </body>
</html>
